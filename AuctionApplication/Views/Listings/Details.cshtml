@model AuctionApplication.Models.Listing
@using Microsoft.AspNetCore.Identity
@inject UserManager<IdentityUser> UserManager

@{
    ViewData["Title"] = "Details";
}

<div class="d-flex gap-5 my-5 align-items-end justify-content-center">
    <img src="~/images/@Model.ImagePath" class="w-25 square-img" alt="Image"  />    
    <div class="d-flex flex-column gap-3">
        <div>
            <h2>@Model.Title</h2>
            <span>Listed by @Model.User?.UserName</span>
            <hr />
            <dl class="row">
                <dt class = "col-sm-3">Description</dt>
                <dd class = "col-sm-8">@Model.Description</dd>
                <dt class = "col-sm-3">Starting Price</dt>
                <dd class = "col-sm-8">$ @Model.Price.ToString("N2")</dd>
            </dl>
        </div>
        <div class="d-flex gap-2">
            @if (Model.IdentityUserId == UserManager.GetUserId(User))
            {
                <a class="flex-grow-1 link-btn py-3 icon-16 d-flex justify-content-center align-items-baseline gap-2 btn-blue btn-blue-hover" asp-action="Edit" asp-route-id="@Model?.Id">
                    <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>
            }
            <a class="flex-grow-1 link-btn btn-mute py-3 icon-16 d-flex justify-content-center align-items-baseline gap-2 btn-mute-hover" asp-action="Index">
                <i class="fa-solid fa-arrow-left"></i> Back to List
            </a>
        </div>
    </div>
</div>
<hr />
<div>
    @await Component.InvokeAsync("BidList", new { listingId = Model?.Id, count = 10 })
</div>

